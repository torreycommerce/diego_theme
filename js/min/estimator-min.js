function estimator(){var t=$("#cart_zip_code").val(),a=$("#cart_shipping_method").val();return $("#shipping-estimator").css({opacity:.5}),$.getJSON(acendaBaseUrl+"/api/sessioncart").fail(function(t){$("#shipping-estimator").css({opacity:1})}).then(function(e){$.post(acendaBaseUrl+"/api/shippingmethod/"+a+"/rate",{total:e.result.subtotal,quantity:e.result.item_count},"json").fail(function(){$("#shipping-estimator").css({opacity:1})}).done(function(a){$.post(acendaBaseUrl+"/api/taxdata/calculate",{shipping_rate:a.result.rate,subtotal:e.result.subtotal,shipping_zip:t},"json").always(function(){$("#shipping-estimator").css({opacity:1})}).done(function(t){$("#form").hide(),$("#estimate").show(),$("#shipping-estimator").css({opacity:1}),$("#rate-estimate").html("$"+a.result.rate),$("#date-estimate").html(a.result.date_range[0]+" - "+a.result.date_range[1]),$("#tax-estimate").html("$"+t.result.tax);var s=parseFloat(e.result.subtotal)+parseFloat(t.result.tax)+parseFloat(a.result.rate);$("#total-estimate").html("$"+s.toFixed(2).toLocaleString())})})}),!1}$("#cart_Estimate").click(function(t){t.preventDefault(),estimator()}),$("#cart_zip_code").keypress(function(t){13==t.which&&(t.preventDefault(),estimator())}),$("#cart_ClearEstimate").click(function(t){t.preventDefault(),$("#estimate").hide(),$("#form").show()});