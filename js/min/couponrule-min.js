$("[id^=couponrule_values]").parents(".form-group").hide(),$("#couponrule_operation").parents(".form-group").hide(),$(".form-horizontal").cascadingDropdown({onReady:function(e,o){var r=$("[name=couponrule\\[id\\]").val();""!=r&&$.getJSON(acendaBaseUrl+"/api/couponrule/"+r,function(e){console.log(e),$("#couponrule_name").val(e.result.name),e.result.operation&&($("#couponrule_operation").val(e.result.operation),$("#couponrule_operation").parents(".form-group").show(),$("#couponrule_operation").parsley("addConstraint",{required:!0}),$("#couponrule_operation").prop("disabled",!1)),$("[name=couponrule\\[rule_type\\]]").val(e.result.rule_type),$("#couponrule_values\\["+e.result.type+"\\]").parents(".form-group").show(),$("#couponrule_values\\["+e.result.type+"\\]").parsley("addConstraint",{required:!0}),$("#couponrule_values\\["+e.result.type+"\\]").val(e.result.value),-1!==$("#couponrule_name").val().indexOf("discount")?$("#couponrule_logic").parents(".form-group").hide():$("#couponrule_logic").parents(".form-group").show()})},selectBoxes:[{selector:"#couponrule_name",source:function(e,o){$.getJSON(acendaBaseUrl+"/api/couponrule/name",e,function(e){o($.map(e.result,function(e,o){return{label:e.label,value:e.value}}))})}},{selector:"#couponrule_operation",requires:["#couponrule_name"],source:function(e,o){$.getJSON(acendaBaseUrl+"/api/couponrule/rule",e,function(e){e.result.operations?($("#couponrule_operation").parents(".form-group").show(),$("#couponrule_operation").prop("disabled",!1),$("#couponrule_operation").parsley("addConstraint",{required:!0})):($("#couponrule_operation").parents(".form-group").hide(),$("#couponrule_operation").prop("disabled",!0),$("#couponrule_operation").parsley("removeConstraint","required")),$("[id^=couponrule_values]").parents(".form-group").hide(),$("[id^=couponrule_values]").each(function(){$(this).parsley("removeConstraint","required")}),$("[name=couponrule\\[rule_type\\]]").val(e.result.rule_type),$("#couponrule_values\\["+e.result.type+"\\]").parents(".form-group").show(),$("#couponrule_values\\["+e.result.type+"\\]").parsley("addConstraint",{required:!0})})}}]}),$("#couponrule_name").change(function(){-1!==$("#couponrule_name").val().indexOf("discount")?$("#couponrule_logic").parents(".form-group").hide():$("#couponrule_logic").parents(".form-group").show()});